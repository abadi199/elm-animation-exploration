<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- SEO -->
    <title>Building Highly Performant Animation in Elm</title>
    <meta name="description" content="Elm Conf 2019 Talk by Abadi Kurniawan" />

    <!-- URL CANONICAL -->
    <!-- <link rel="canonical" href="http://your-url.com/permalink"> -->

    <!-- Google Fonts -->
    <link href="../fonts/FantasqueSansMono-Regular.woff2" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext"
      rel="stylesheet"
    />
    <!-- CSS Base -->
    <link rel="stylesheet" type="text/css" href="main.scss" />

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

    <!-- FACEBOOK -->
    <meta property="og:url" content="http://your-url.com/permalink" />
    <!-- EDIT -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Elm Conf 2019 Talk by Abadi Kurniawan" />
    <!-- EDIT -->
    <meta
      property="og:description"
      content="Elm Conf 2019 Talk by Abadi Kurniawan"
    />
    <!-- EDIT -->
    <meta property="og:updated_time" content="2017-01-04T16:54:27" />
    <!-- EDIT -->
    <meta property="og:image" content="../static/images/share-webslides.jpg" />
    <!-- EDIT -->

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@webslides" />
    <!-- EDIT -->
    <meta name="twitter:creator" content="@jlantunez" />
    <!-- EDIT -->
    <meta
      name="twitter:title"
      content="Elm Conf 2019 Talk by Abadi Kurniawan"
    />
    <!-- EDIT -->
    <meta
      name="twitter:description"
      content="Elm Conf 2019 Talk by Abadi Kurniawan"
    />
    <!-- EDIT -->
    <meta name="twitter:image" content="../static/images/share-webslides.jpg" />
    <!-- EDIT -->

    <!-- FAVICONS -->
    <link
      rel="shortcut icon"
      sizes="16x16"
      href="../static/images/favicons/favicon.png"
    />
    <link
      rel="shortcut icon"
      sizes="32x32"
      href="../static/images/favicons/favicon-32.png"
    />
    <link
      rel="apple-touch-icon icon"
      sizes="76x76"
      href="../static/images/favicons/favicon-76.png"
    />
    <link
      rel="apple-touch-icon icon"
      sizes="120x120"
      href="../static/images/favicons/favicon-120.png"
    />
    <link
      rel="apple-touch-icon icon"
      sizes="152x152"
      href="../static/images/favicons/favicon-152.png"
    />
    <link
      rel="apple-touch-icon icon"
      sizes="180x180"
      href="../static/images/favicons/favicon-180.png"
    />
    <link
      rel="apple-touch-icon icon"
      sizes="192x192"
      href="../static/images/favicons/favicon-192.png"
    />

    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#333333" />
  </head>
  <body>
    <main role="main">
      <article id="webslides">
        <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->

        <section class="bg-blue aligncenter">
          <span class="background dark"></span>
          <div class="wrap">
            <h1>
              Building Highly Performant Animation in Elm
            </h1>
            <h3>by Abadi Kurniawan</h3>
            <h4>Elm Conf 2019</h4>
          </div>
        </section>
        <section class="aligncenter">
          <div id="slowCaterpillar"></div>
        </section>
        <section class="aligncenter">
          <div class="wrap"><h1>Journey Through the Animation Lands</h1></div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>Goal of Our Journey</h1>
            <ul class="flexblock features">
              <li>Explore ways of doing animation</li>
              <li>High performant animation</li>
              <li>Make our caterpillar happy</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>NOT the Goal of Our Journey</h1>
            <ul class="flexblock features">
              <li>Build a complete solution</li>
              <li>Teach you best practice</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap"><h1>The Land of Pure Elm</h1></div>
        </section>
        <section class="fullscreen">
          <div class="card-50 flip">
            <figure class="flex-content preview">
              <div id="elmOneApple"></div>
            </figure>
            <div class="code">
              <h1 class="aligncenter">Elm Animation</h1>
              <code class="elm"
                ><pre>
type alias Model = { x : Float }

type Msg = Tick Float


subscriptions model =
    onAnimationFrameDelta Tick


update (Tick delta) model =
    let
        speed = 0.2 
    in
    ( { model | x = x + (delta * speed) }
    , Cmd.none
    )


view model =
    div [] [ apple [ css [ left (Css.px model.x) ] ]
                </pre></code
              >
            </div>
          </div>
        </section>

        <section class="fullscreen">
          <div class="card-50 flip">
            <figure class="flex-content preview">
              <div id="elmTwoApples"></div>
            </figure>
            <div class="code">
              <h1 class="aligncenter">Elm Animation</h1>
              <code class="elm"
                ><pre>
type alias Model =
    { timeElapsed: Float, x1 : Float, x2: Float }


update (Tick delta) model =
    let
        speed =
            0.2 -- pixel per ms

        timeElapsed =
            model.timeElapsed + delta
    in
    ( { model
        | timeElapsed = timeElapsed
        , x1 =
            if timeElapsed < 1000 then
                x1 + (delta * speed)
            else
                x1
        , x2 =
            if timeElapsed > 1000 then
                x2 + (delta * speed)
            else
                x2
      }
    , Cmd.none
    )


view model =
    div []
        [ apple [ css [ left (Css.px model.x1) ]
        , apple [ css [ left (Css.px model.x2) ]
        ]
              </pre
                ></code
              >
            </div>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>What's Great</h1>
            <ul class="flexblock features">
              <li>Pure functional</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>What's not so great</h1>
            <ul class="flexblock features">
              <li>Cumbersome to synchronize multiple animations</li>
              <li>No browser/hardware optimization</li>
              <li>Break elm debugger</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap"><h1>Animation as Side Effect</h1></div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>CSS Animation Land</h1>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <h1>Domain Specific Language (DSL) for CSS Keyframe Animations</h1>
          </div>
        </section>
        <section class="aligncenter">
          <h1>Simple Animation</h1>
          <div class="card-50">
            <figure class="code">
              <h3 class="aligncenter">DSL</h3>
              <code class="elm">
                <pre>
div
  |> Animation.with
    [ Animation.translate
      { x = px 0, y = px 100 }
      (second 1)
    , Animation.opacity
      { from = percentage 100, to = percentage 0 }
      (second 2)
    ]
                        </pre
                >
              </code>
            </figure>
            <figure class="code">
              <h3 class="aligncenter">CSS</h3>
              <code class="css">
                <pre>
@keyframes translate2902574612 {
  100% { transform: translate(0px, 100px); }
}
@keyframes opacity2501090504 { 
  0% { opacity: 10000; }
  100% { opacity: 0 }
}
div {
  animation: 
    1s translate2902574612,
    2s opacity2501090504;
}
                        </pre
                >
              </code>
            </figure>
          </div>
        </section>
        <section class="aligncenter">
          <h1>Sequence of Animations</h1>
          <div class="card-50">
            <figure class="code">
              <h3 class="aligncenter">DSL</h3>
              <code class="elm">
                <pre>
div
  |> Animation.with
    [ Animation.sequence
      [ Animation.translate { x = px 0, y = px 100 }
        (second 1)
      , Animation.translate { x = px 100, y = px 0 }
        (second 2)
      ]
    ]
                        </pre
                >
              </code>
            </figure>
            <figure class="code">
              <h3 class="aligncenter">CSS</h3>
              <code class="css">
                <pre>
@keyframes sequence2902574612 {
    33% { transform: translate(0px, 100px); }
    100% { transform: translate(100px, 100px); }
}

div {
    animation: 3s sequence2902574612;
}
                        </pre
                >
              </code>
            </figure>
          </div>
        </section>
        <section class="aligncenter">
          <h1>Multiple Animations</h1>
          <div class="card-50">
            <figure class="code">
              <h3 class="aligncenter">DSL</h3>
              <code class="elm">
                <pre>
[ div
  |> Animation.with
    [ Animation.translate { x = px 100, y = px 0 }
        (second 2)
    ]
, div
  |> Animation.with
    [ Animation.translate { x = px 100, y = px 0 }
        (second 2)
      |> Animation.delay (second 2)
    ]
                </pre>
              </code>
            </figure>
            <figure class="code">
              <h3 class="aligncenter">CSS</h3>
              <code class="css">
                <pre>
@keyframes sequence2902574612 {
    33% { transform: translate(0px, 100px); }
    100% { transform: translate(100px, 100px); }
}

div {
    animation: 3s sequence2902574612;
}
                  </pre
                >
              </code>
            </figure>
          </div>
        </section>
        <section class="fullscreen">
          <div class="card-50 flip">
            <figure class="flex-content preview">
              <div id="cssOneApple"></div>
            </figure>
            <div class="code">
              <h1 class="aligncenter">CSS Animation</h1>
              <code class="elm">
                <pre>
view model =
    div [] []
                    </pre
                >
              </code>
            </div>
          </div>
        </section>
        <section class="aligncenter">
          <div class="wrap">
            <p>
              Code with multiple animations
            </p>
          </div>
        </section>
        <section class="aligncenter bg-green">
          <div class="wrap">
            <h1>The Good</h1>
          </div>
          <div class="wrap-50">
            <ul class="flexblock features">
              <li>Highly performant</li>
              <li>Declarative</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter bg-green">
          <div class="wrap">
            <h1>The Bad</h1>
            <ul class="flexblock features">
              <li>Fire and forget type of animation</li>
              <li>Difficult to coordinate multiple animations</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter bg-purple">
          <div class="wrap">
            <h1>Web Animations Land</h1>
            <h3>a.k.a JavaScript Land</h3>
          </div>
        </section>
        <section class="aligncenter bg-purple">
          <div class="wrap">
            <h1>Web Animations API</h1>
            <h3>
              JavaScript API for accessing browser's animation engine
            </h3>
            <span class="space-small"></span>
            <code class="js">
              <pre>
document.getElementById("apple").animate(
  [
    { transform: 'translate(0, 0)' },
    { transform: 'translate(500, 0)' }
  ],
  {
    fill: 'forwards',
    duration: 3000,
    iterations: 1
  }
);
                  </pre
              >
            </code>
            <h4>
              https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API
            </h4>
          </div>
        </section>
        <section class="aligncenter bg-purple">
          <div class="wrap">
            <h1>JS Interop</h1>
            <ul class="flexblock features">
              <li>Port</li>
              <li>Web Component</li>
            </ul>
          </div>
        </section>
        <section class="fullscreen bg-purple">
          <div class="card-50 flip">
            <figure class="diagram port">
              <img src="../images/port-architecture.png" />
            </figure>
            <div class="aligncenter">
              <h1>Port</h1>
            </div>
          </div>
        </section>
        <section class="fullscreen bg-purple">
          <div class="card-50 flip">
            <figure class="diagram web-component">
              <img src="../images/web-component-architecture.png" />
            </figure>
            <div class="aligncenter">
              <h1>Web Component</h1>
              <h3>( Custom Element )</h3>
            </div>
          </div>
        </section>
        <section class="aligncenter bg-purple">
          <div class="wrap">
            <h1>Our API</h1>
            <ul class="flexblock features">
              <li>
                <h2>Running an Animation</h2>
                Elm > Keyframes data > JSON Encoder > Web Component's Attribute
                > Run Animation
              </li>
              <li>
                <h2>Listening to Animation</h2>
                Current Animation .onFinish > Web Component dispatchEvent > Elm
                onFinish > Msg
              </li>
            </ul>
          </div>
        </section>
        <section class="fullscreen bg-purple">
          <div class="card-50 flip">
            <figure class="flex-content preview">
              <div id="jsOneApple"></div>
            </figure>
            <div class="code">
              <h1 class="aligncenter">One Apple</h1>
              <h4>Elm Code</h4>
              <code class="elm">
                <pre>

view model =
  div []
    [ Animation.node
      [ Animation.translate { x = px 0, y = px 0 }
      , Animation.translate { x = px 500, y = px 0 }
      ]
      ({ duration = millisecond 2000 }
        |> Options.default 
        |> Options.withFill Fill.forwards
      )
      []
      (apple model)
    ]
                    </pre
                >
              </code>
              <h4>JS Code</h4>
              <code class="js">
                <pre>
class ElmAnimation extends HTMLElement {
  connectedCallback() {
    const animateJson = this.getAttribute("animate");

    if (animateJson) {
      this.children[0].animate(
        animationData.keyframes,
        animationData.options
      );
    }
  }
}
                    </pre
                >
              </code>
            </div>
          </div>
        </section>
        <section class="fullscreen bg-purple">
          <div class="card-50 flip">
            <figure class="flex-content preview">
              <div id="jsTwoApples"></div>
            </figure>
            <div class="code">
              <h1 class="aligncenter">Two Apples</h1>
              <h4>Elm Code</h4>
              <code class="elm">
                <pre>
div []
  [ Animation.node
    keyframes 
    options
    [ Events.onFinish FirstAppleAnimationFinish ]
    (apple model)

  , Animation.node
    (case model.animationState of
      FirstAppleMoving ->
        []

      SecondAppleMoving ->
        keyframes 
    )
    options
    []
    (apple model)
  ]
                    </pre
                >
              </code>
            </div>
          </div>
        </section>
        <section class="aligncenter bg-green">
          <div class="wrap">
            <h1>The Good</h1>
            <ul class="flexblock features">
              <li>Highly performant</li>
              <li>Declarative</li>
              <li>Simple to synchronize</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter bg-green">
          <div class="wrap">
            <h1>The Bad</h1>
            <ul class="flexblock features">
              <li>Browser support (only FF and Chrome)</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter">
          <div id="slowCaterpillarAgain"></div>
        </section>
        <section>
          <div id="fastCaterpillar"></div>
        </section>
        <section class="aligncenter bg-blue">
          <div class="wrap">
            <h1>What's Next?</h1>
            <ul class="flexblock features">
              <li>Collaborate on developing animation library</li>
            </ul>
          </div>
        </section>
        <section class="aligncenter bg-blue">
          <div class="wrap">
            <h1>Links</h1>
            <span class="space-small"></span>
            <h4>
              Elm Animation Exploration
            </h4>

            <h5>https://github.com/abadi199/elm-animation-exploration</h5>
            <h5></h5>
          </div>
        </section>
        <section class="bg-gray">
          <div class="wrap">
            <h1>Thank you!</h1>
          </div>
        </section>
      </article>
      <div id="fpsCounter"></div>
    </main>
    <script src="../Js/elmAnimation.ts"></script>
    <script src="./index.ts"></script>
  </body>
</html>
